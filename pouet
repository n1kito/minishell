/* Logs new node in expansion structure to track expansions, their positions and
 * values (if found in env). Note that they are added LIFO. */
void	add_exp_node(t_expand **expansions, char *token, int i, t_env *env)
{
	t_expand	*new_expand;

	new_expand = malloc(sizeof(t_expand));
	if (!new_expand)
		return ;
	new_expand->start = i;
	new_expand->name_start = i + 1;
	new_expand->name_len = expansion_name_len(token + i);
	new_expand->name_end = i + new_expand->name_len;
	new_expand->name = token + new_expand->name_start;
	new_expand->value = search_env(env, new_expand->name,
			new_expand->name_len);
	new_expand->next = NULL;
	if (*expansions == NULL)
		*expansions = new_expand;
	else
	{
		new_expand->next = *expansions;
		*expansions = new_expand;
	}
}
